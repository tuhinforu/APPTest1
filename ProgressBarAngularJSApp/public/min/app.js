var myApp=angular.module("myApp",["ui.bootstrap","countTo"]);myApp.controller("progressBar",["$scope","$timeout","$http",function(i,s,a){i.data=JSON.parse('{"buttons":[42,34,-11,-44],"bars":[69,49,19],"limit":120}'),i.dataURL="http://pb-api.herokuapp.com/bars",a.get(i.dataURL).success(function(a){console.log(a),i.data=a,i.assignValueToCacheBar(),i.selectedProgress=i.data.bars[0]}).error(function(a){console.log("Error: "+a)}),i.selectedProgress=i.data.bars[0],i.onclickButton=function(a){i.increment=parseInt(a),i.animateProgressBar()},i.assignValueToCacheBar=function(){i.cacheBars=[];for(var a=0;a<i.data.bars.length;a++)i.cacheBars.push({currentValue:0,currentWidth:0});s(function(){for(var a=0;a<i.data.bars.length;a++)i.cacheBars[a].rawValue=i.data.bars[a],i.cacheBars[a].currentValue=i.data.bars[a],i.cacheBars[a].currentWidth=i.data.bars[a],i.cacheBars[a].origValue=i.data.bars[a]},200)},i.assignValueToCacheBar(),i.animateProgressBar=function(){for(var a=0,r=0;r<i.cacheBars.length;r++){var e=parseInt(i.cacheBars[r].origValue);if(parseInt(i.selectedProgress)==e){a=r;break}}var t=i.cacheBars[a],n=t.currentWidth,s=parseInt(t.rawValue)+i.increment;t.rawValue=parseInt(s),s=s<0?0:s,t.currentValue=parseInt(s);var c=s=100<=(s=Math.floor(100*s/i.data.limit))?100:s,o=i.increment<0?-1:1;i.animateBarFillObj(t,n,c,o)},i.animateBarFillObj=function(a,r,e,t){var n=r;0<=n&&n<=100&&(n!=e&&(n=r+t,s(function(){i.animateBarFillObj(a,n,e,t)},10)),a.currentWidth=n)}}]);